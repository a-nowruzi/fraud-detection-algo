# ๐ ุณุณุชู ุชุดุฎุต ุชููุจ ูพุฒุดฺฉ - ูุณุฎู ฺฉุงูู

ุงู ูพุฑูฺู ุดุงูู ฺฉ ุณุณุชู ฺฉุงูู ุชุดุฎุต ุชููุจ ุฏุฑ ูุณุฎูโูุง ูพุฒุดฺฉ ุงุณุช ฺฉู ุงุฒ ุงูฺฏูุฑุชู Isolation Forest ุงุณุชูุงุฏู ูโฺฉูุฏ ู ุดุงูู ฺฉ API ฺฉุงูู ุจุง ุชูุงู ูุงุจูุชโูุง ููุฌูุฏ ุฏุฑ Jupyter notebook ุงุณุช.

## ๐ ูฺฺฏโูุง ฺฉูุฏ

### ๐ฌ ุชุญูู ู ูุฏูโุณุงุฒ
- **ุงูฺฏูุฑุชู Isolation Forest**: ุจุฑุง ุชุดุฎุต ููุงุฑุฏ ูุดฺฉูฺฉ
- **ฑฑ ุดุงุฎุต ุฑุณฺฉ**: ูุญุงุณุจู ุฎูุฏฺฉุงุฑ ุดุงุฎุตโูุง ูุฎุชูู
- **ูพุดโูพุฑุฏุงุฒุด ุฏุงุฏู**: ุชุจุฏู ุชุงุฑุฎ ุดูุณุ ูุญุงุณุจู ุณูุ ูุฑูุงูโุณุงุฒ
- **ุงุณุชุฎุฑุงุฌ ูฺฺฏ**: ูุญุงุณุจู ูุณุจุชโูุงุ ุฏุฑุตุฏ ุชุบุฑุงุชุ ู ุดุงุฎุตโูุง ุขูุงุฑ

### ๐ API ฺฉุงูู
- **Flask API**: ุจุง ุชูุงู ูุงุจูุชโูุง ููุฌูุฏ ุฏุฑ notebook
- **ูููุฏุงุฑูุง ุชุนุงูู**: ูููุฏุงุฑูุง ูุฎุชูู ุจุฑุง ุชุญูู ุฏุงุฏูโูุง
- **ูุณุชูุฏุงุช ุฎูุฏฺฉุงุฑ**: ุตูุญู ุงุตู ุจุง ูุณุชูุฏุงุช ฺฉุงูู
- **ุงุนุชุจุงุฑุณูุฌ ุฏุงุฏู**: ุจุฑุฑุณ ุตุญุช ุฏุงุฏูโูุง ูุฑูุฏ

### ๐ ูููุฏุงุฑูุง ู ุชุญููโูุง
- ูููุฏุงุฑ ุชููุจ ุจุฑ ุงุณุงุณ ุงุณุชุงู
- ูููุฏุงุฑ ุชููุจ ุจุฑ ุงุณุงุณ ุฌูุณุช
- ูููุฏุงุฑ ุชููุจ ุจุฑ ุงุณุงุณ ฺฏุฑูู ุณู
- ูููุฏุงุฑ ุดุงุฎุตโูุง ุฑุณฺฉ
- ุขูุงุฑ ฺฉู ุณุณุชู

## ๐ ูุตุจ ู ุฑุงูโุงูุฏุงุฒ

### ูพุดโูุงุฒูุง
- Python 3.8+
- ุชูุงู ูุงุจุณุชฺฏโูุง ููุฌูุฏ ุฏุฑ `requirements.txt`

### ูุตุจ ุณุฑุน

#### ููุฏูุฒ:
```bash
# ุงุฌุฑุง ูุณุชูู
run_api.bat

# ุง ุฏุณุช
pip install -r requirements.txt
python app.py
```

#### ูููฺฉุณ/ูฺฉ:
```bash
# ุฏุงุฏู ูุฌูุฒ ุงุฌุฑุง
chmod +x run_api.sh

# ุงุฌุฑุง ูุณุชูู
./run_api.sh

# ุง ุฏุณุช
pip3 install -r requirements.txt
python3 app.py
```

## ๐ ุณุงุฎุชุงุฑ ูพุฑูฺู

```
fraud-detection-algo/
โโโ ๐ app.py                          # ูุงู ุงุตู API
โโโ ๐ requirements.txt                # ูุงุจุณุชฺฏโูุง ูพุฑูฺู
โโโ ๐ API_README.md                   # ูุณุชูุฏุงุช API
โโโ ๐ README_FINAL.md                 # ุงู ูุงู
โโโ ๐ test_api.py                     # ูุงู ุชุณุช API
โโโ ๐ run_api.bat                     # ุงุฌุฑุง API ุฏุฑ ููุฏูุฒ
โโโ ๐ run_api.sh                      # ุงุฌุฑุง API ุฏุฑ ูููฺฉุณ/ูฺฉ
โโโ ๐ DataSEt_FD7.CSV                # ุฏุงุฏูโูุง ุงุตู (215MB)
โโโ ๐ specialties.csv                 # ูุงู ุชุฎุตุตโูุง
โโโ ๐ assets/                         # ูุงูโูุง ุฏุงุฑุง
โ   โโโ ๐จ Vazir-Medium-FD.ttf        # ูููุช ูุงุฑุณ
โโโ ๐ __pycache__/                    # ฺฉุด Python
โโโ ๐ fraud_detection_env/            # ูุญุท ูุฌุงุฒ
โโโ ๐ Project_FD 0.ipynb             # ูุงู Jupyter ุงุตู
โโโ ๐ README.md                       # ูุณุชูุฏุงุช ุงุตู
โโโ ๐ USER_GUIDE.md                   # ุฑุงูููุง ฺฉุงุฑุจุฑ
โโโ ๐ TECHNICAL_DOCUMENTATION.md      # ูุณุชูุฏุงุช ูู
โโโ ๐ CHANGELOG.md                    # ุชุงุฑุฎฺู ุชุบุฑุงุช
โโโ ๐ .gitignore                      # ูุงูโูุง ูุงุฏุฏู ฺฏุฑูุชู ุดุฏู
โโโ ๐ *_function.py                   # ุชูุงุจุน ูุญุงุณุจู ูฺฺฏโูุง
    โโโ age_calculate_function.py      # ูุญุงุณุจู ุณู
    โโโ shamsi_to_miladi_function.py   # ุชุจุฏู ุชุงุฑุฎ ุดูุณ
    โโโ add_one_month_function.py      # ุงูุฒูุฏู ฺฉ ูุงู
    โโโ ftr_1_function.py              # ูฺฺฏ ฑ
    โโโ ftr_2_function.py              # ูฺฺฏ ฒ
    โโโ ftr_3_3_function.py            # ูฺฺฏ ณ
    โโโ ftr_4_function.py              # ูฺฺฏ ด
    โโโ ftr_5_function.py              # ูฺฺฏ ต
    โโโ ftr_6_function.py              # ูฺฺฏ ถ
    โโโ ftr_7_function.py              # ูฺฺฏ ท
    โโโ ftr_7_2_function.py            # ูฺฺฏ ท.ฒ
    โโโ ftr_8_1_function.py            # ูฺฺฏ ธ.ฑ
    โโโ ftr_8_2_function.py            # ูฺฺฏ ธ.ฒ
    โโโ ftr_9_function.py              # ูฺฺฏ น
```

## ๐ง ูุญูู ุงุณุชูุงุฏู

### ฑ. ุงุฌุฑุง API
```bash
# ููุฏูุฒ
run_api.bat

# ูููฺฉุณ/ูฺฉ
./run_api.sh
```

### ฒ. ุฏุณุชุฑุณ ุจู API
- **ุตูุญู ุงุตู**: http://localhost:5000
- **ูุณุชูุฏุงุช**: http://localhost:5000 (ููุงู ุตูุญู ุงุตู)

### ณ. ุชุณุช API
```bash
python test_api.py
```

### ด. ุงุณุชูุงุฏู ุงุฒ API
```python
import requests

# ุชุดุฎุต ุชููุจ
url = "http://localhost:5000/predict"
data = {
    "ID": 48928,
    "jalali_date": "1361/05/04",
    "Adm_date": "1403/08/05",
    "Service": "ูุฒุช ูุชุฎุตุต",
    "provider_name": "ุญุณูุฎุงู ุฎุณุฑูุฎุงูุฑ",
    "provider_specialty": "ุฏฺฉุชุฑุง ุญุฑููโุง ูพุฒุดฺฉ",
    "cost_amount": 2000000
}

response = requests.post(url, json=data)
result = response.json()
print(f"ุชููุจ: {'ุจูู' if result['is_fraud'] else 'ุฎุฑ'}")
```

## ๐ ููุงุท ูพุงุงู API

| ูุชุฏ | ุขุฏุฑุณ | ุชูุถุญุงุช |
|-----|-------|---------|
| GET | `/` | ุตูุญู ุงุตู ุจุง ูุณุชูุฏุงุช |
| POST | `/predict` | ุชุดุฎุต ุชููุจ |
| GET | `/stats` | ุขูุงุฑ ุณุณุชู |
| GET | `/health` | ุจุฑุฑุณ ุณูุงูุช |
| GET | `/charts/fraud-by-province` | ูููุฏุงุฑ ุชููุจ ุจุฑ ุงุณุงุณ ุงุณุชุงู |
| GET | `/charts/fraud-by-gender` | ูููุฏุงุฑ ุชููุจ ุจุฑ ุงุณุงุณ ุฌูุณุช |
| GET | `/charts/fraud-by-age` | ูููุฏุงุฑ ุชููุจ ุจุฑ ุงุณุงุณ ุณู |
| POST | `/charts/risk-indicators` | ูููุฏุงุฑ ุดุงุฎุตโูุง ุฑุณฺฉ |

## ๐ ุดุงุฎุตโูุง ุฑุณฺฉ

API ฑฑ ุดุงุฎุต ุฑุณฺฉ ูุฎุชูู ุฑุง ูุญุงุณุจู ูโฺฉูุฏ:

1. **unq_ratio_provider**: ูุณุจุช ฺฉู ูพุฒุดฺฉุงู ุจู ูพุฒุดฺฉุงู ููุญุตุฑ ุจู ูุฑุฏ ุจุฑุง ูุฑ ุจูุงุฑ
2. **unq_ratio_patient**: ูุณุจุช ฺฉู ุจูุงุฑุงู ุจู ุจูุงุฑุงู ููุญุตุฑ ุจู ูุฑุฏ ุจุฑุง ูุฑ ูพุฒุดฺฉ
3. **percent_change_provider**: ุฏุฑุตุฏ ุชุบุฑ ูุฒูู ูุณุฎูโูุง ูพุฒุดฺฉ ูุณุจุช ุจู ูุงูโูุง ูุจู
4. **percent_change_patient**: ุฏุฑุตุฏ ุชุบุฑ ูุฒูู ูุณุฎูโูุง ุจูุงุฑ ูุณุจุช ุจู ูุงูโูุง ูุจู
5. **percent_difference**: ุฏุฑุตุฏ ุงุฎุชูุงู ูุฒูู ุฎุฏูุช ูุณุจุช ุจู ูุงูฺฏู
6. **percent_diff_ser**: ุฏุฑุตุฏ ุชุบุฑ ูุฒูู ุฎุฏูุช ุจุฑุง ูพุฒุดฺฉ ูุณุจุช ุจู ูุงู ูุจู
7. **percent_diff_spe**: ุฏุฑุตุฏ ุชุบุฑ ูุฒูู ุชุฎุตุต ุจุฑุง ูพุฒุดฺฉ ูุณุจุช ุจู ูุงู ูุจู
8. **percent_diff_spe2**: ุฏุฑุตุฏ ุชุบุฑ ูุณุชูู ูุฒูู ุชุฎุตุต ูุณุจุช ุจู ูุงู ูุจู
9. **percent_diff_ser_patient**: ุฏุฑุตุฏ ุชุบุฑ ูุฒูู ุฎุฏูุช ุจุฑุง ุจูุงุฑ ูุณุจุช ุจู ูุงู ูุจู
10. **percent_diff_serv**: ุฏุฑุตุฏ ุชุบุฑ ฺฉู ูุฒูู ุฎุฏูุช ูุณุจุช ุจู ูุงู ูุจู
11. **Ratio**: ูุณุจุช ุฎุฏูุงุช ุจู ฺฉู ูุณุฎูโูุง ูพุฒุดฺฉ

## ๐ฏ ุชูุณุฑ ูุชุงุฌ

- **prediction**: ฑ ุจุฑุง ูุณุฎู ูุฑูุงูุ -ฑ ุจุฑุง ูุณุฎู ูุดฺฉูฺฉ
- **score**: ุงูุชุงุฒ ูุฑูุงูโุดุฏู (ููุงุฏุฑ ุจุงูุงุชุฑ = ุงุญุชูุงู ุจุดุชุฑ ุชููุจ)
- **is_fraud**: true ุจุฑุง ูุณุฎู ูุดฺฉูฺฉุ false ุจุฑุง ูุณุฎู ูุฑูุงู
- **risk_scores**: ุขุฑุงูโุง ุงุฒ ฑฑ ุนุฏุฏ ุจู ฐ ุชุง ฑฐฐ ูุดุงูโุฏููุฏู ุฑุณฺฉ ูุฑ ุดุงุฎุต

## ๐ ุนุจโุงุจ

### ูุดฺฉูุงุช ุฑุงุฌ:

1. **ุฎุทุง ุจุงุฑฺฏุฐุงุฑ ุฏุงุฏูโูุง**
   - ุงุทููุงู ุญุงุตู ฺฉูุฏ ฺฉู ูุงู `DataSEt_FD7.CSV` ุฏุฑ ูุณุฑ ุตุญุญ ูุฑุงุฑ ุฏุงุฑุฏ
   - ุญุฌู ูุงู ุจุงุฏ ุญุฏูุฏ ฒฑต ูฺฏุงุจุงุช ุจุงุดุฏ

2. **ุฎุทุง ูููุช**
   - ูุงู ูููุช ูุงุฑุณ ุฏุฑ ูพูุดู `assets` ุจุงุฏ ููุฌูุฏ ุจุงุดุฏ
   - ูุงู ูุงู: `Vazir-Medium-FD.ttf`

3. **ุฎุทุง ุญุงูุธู**
   - ุจุฑุง ุฏุงุฏูโูุง ุจุฒุฑฺฏุ ููฺฉู ุงุณุช ูุงุฒ ุจู ุงูุฒุงุด ุญุงูุธู ุฏุงุดุชู ุจุงุดุฏ
   - ุญุฏุงูู ด ฺฏฺฏุงุจุงุช RAM ุชูุตู ูโุดูุฏ

4. **ุฎุทุง ูุงุจุณุชฺฏโูุง**
   ```bash
   pip install -r requirements.txt
   ```

### ูุงฺฏโูุง:
API ูุงฺฏโูุง ููุตูโุง ุชููุฏ ูโฺฉูุฏ ฺฉู ูโุชูุงูุฏ ุจุฑุง ุนุจโุงุจ ุงุณุชูุงุฏู ฺฉูุฏ.

## ๐ ุขูุงุฑ ูพุฑูฺู

- **ุชุนุฏุงุฏ ุฑฺฉูุฑุฏูุง**: ทนณ,ตธน ูุณุฎู ูพุฒุดฺฉ
- **ุชุนุฏุงุฏ ูฺฺฏโูุง**: ฑฑ ุดุงุฎุต ุฑุณฺฉ
- **ุงูฺฏูุฑุชู**: Isolation Forest
- **ูุฑุฎ ุชููุจ**: ฒฐูช (contamination=0.2)
- **ุญุฌู ุฏุงุฏู**: ฒฑต ูฺฏุงุจุงุช

## ๐ ููุงุณู ุจุง Jupyter Notebook

| ูฺฺฏ | Jupyter Notebook | API |
|-------|------------------|-----|
| ุชุญูู ุชุนุงูู | โ | โ |
| ูููุฏุงุฑูุง | โ | โ |
| ุชุดุฎุต ุชููุจ | โ | โ |
| ูุญุงุณุจู ุดุงุฎุตโูุง | โ | โ |
| ุฑุงุจุท ฺฉุงุฑุจุฑ | โ | โ |
| ูุงุจูุช ุงุณุชูุงุฏู ุฏุฑ ุจุฑูุงููโูุง ุฏฺฏุฑ | โ | โ |
| ูุณุชูุฏุงุช ุฎูุฏฺฉุงุฑ | โ | โ |
| ุชุณุช ุฎูุฏฺฉุงุฑ | โ | โ |

## ๐ ูุฒุงุง API

1. **ูุงุจูุช ุงุณุชูุงุฏู ูุฌุฏุฏ**: ูโุชูุงูุฏ ุงุฒ API ุฏุฑ ุจุฑูุงููโูุง ุฏฺฏุฑ ุงุณุชูุงุฏู ฺฉูุฏ
2. **ููุงุณโูพุฐุฑ**: ูุงุจูุช ูพุฑุฏุงุฒุด ููุฒูุงู ฺูุฏู ุฏุฑุฎูุงุณุช
3. **ูุณุชูุฏุงุช ฺฉุงูู**: ุตูุญู ุงุตู ุจุง ูุณุชูุฏุงุช ฺฉุงูู
4. **ุชุณุช ุฎูุฏฺฉุงุฑ**: ูุงู ุชุณุช ุจุฑุง ุจุฑุฑุณ ุนููฺฉุฑุฏ
5. **ูุตุจ ุขุณุงู**: ุงุณฺฉุฑูพุชโูุง ุงุฌุฑุง ุจุฑุง ููุฏูุฒ ู ูููฺฉุณ
6. **ูพุดุชุจุงู ุงุฒ ูุงุฑุณ**: ุชูุงู ูพุงูโูุง ู ูููุฏุงุฑูุง ุจู ูุงุฑุณ

## ๐ ูพุดุชุจุงู

ุจุฑุง ุณูุงูุงุช ู ูุดฺฉูุงุช:
1. ูุงู `API_README.md` ุฑุง ูุทุงูุนู ฺฉูุฏ
2. ูุงู `test_api.py` ุฑุง ุงุฌุฑุง ฺฉูุฏ
3. ูุงฺฏโูุง API ุฑุง ุจุฑุฑุณ ฺฉูุฏ
4. ุจุง ุชู ุชูุณุนู ุชูุงุณ ุจฺฏุฑุฏ

## ๐ ูุฌูุฒ

ุงู ูพุฑูฺู ุชุญุช ูุฌูุฒ MIT ููุชุดุฑ ุดุฏู ุงุณุช.

---

**๐ ุชุจุฑฺฉ! ุดูุง ุญุงูุง ฺฉ ุณุณุชู ฺฉุงูู ุชุดุฎุต ุชููุจ ูพุฒุดฺฉ ุจุง API ุฏุงุฑุฏ ฺฉู ุชูุงู ูุงุจูุชโูุง Jupyter notebook ุฑุง ุฏุฑ ุงุฎุชุงุฑุชุงู ูุฑุงุฑ ูโุฏูุฏ.**
