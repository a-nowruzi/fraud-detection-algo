# ๐ API ุชุดุฎุต ุชููุจ ูพุฒุดฺฉ

ุงู API ุจุฑุง ุชุดุฎุต ุชููุจ ุฏุฑ ูุณุฎูโูุง ูพุฒุดฺฉ ุทุฑุงุญ ุดุฏู ุงุณุช ู ุงุฒ ุงูฺฏูุฑุชู Isolation Forest ุจุฑุง ุดูุงุณุง ููุงุฑุฏ ูุดฺฉูฺฉ ุงุณุชูุงุฏู ูโฺฉูุฏ.

## ๐ ูฺฺฏโูุง

- **ุชุดุฎุต ุชููุจ**: ุงุณุชูุงุฏู ุงุฒ ุงูฺฏูุฑุชู Isolation Forest
- **ฑฑ ุดุงุฎุต ุฑุณฺฉ**: ูุญุงุณุจู ุฎูุฏฺฉุงุฑ ุดุงุฎุตโูุง ูุฎุชูู ุฑุณฺฉ
- **ูููุฏุงุฑูุง ุชุญูู**: ูููุฏุงุฑูุง ูุชููุน ุจุฑุง ุชุญูู ุฏุงุฏูโูุง
- **ูพุดุชุจุงู ุงุฒ ุชุงุฑุฎ ุดูุณ**: ุชุจุฏู ุฎูุฏฺฉุงุฑ ุชุงุฑุฎโูุง ุดูุณ ุจู ููุงุฏ
- **ูุญุงุณุจู ุณู**: ูุญุงุณุจู ุณู ุจุฑ ุงุณุงุณ ุชุงุฑุฎ ุชููุฏ
- **ุชุญูู ฺูุฏุจุนุฏ**: ุชุญูู ุจุฑ ุงุณุงุณ ุงุณุชุงูุ ุฌูุณุช ู ฺฏุฑูู ุณู

## ๐ ูุตุจ ู ุฑุงูโุงูุฏุงุฒ

### ูพุดโูุงุฒูุง
- Python 3.8+
- ุชูุงู ูุงุจุณุชฺฏโูุง ููุฌูุฏ ุฏุฑ `requirements.txt`

### ูุตุจ ูุงุจุณุชฺฏโูุง
```bash
pip install -r requirements.txt
```

### ุงุฌุฑุง API
```bash
python app.py
```

API ุฏุฑ ุขุฏุฑุณ `http://localhost:5000` ุฏุฑ ุฏุณุชุฑุณ ุฎูุงูุฏ ุจูุฏ.

## ๐ ููุงุท ูพุงุงู (Endpoints)

### 1. ุตูุญู ุงุตู
- **URL**: `/`
- **Method**: GET
- **ุชูุถุญุงุช**: ุตูุญู ุงุตู ุจุง ูุณุชูุฏุงุช API

### 2. ุชุดุฎุต ุชููุจ
- **URL**: `/predict`
- **Method**: POST
- **ุชูุถุญุงุช**: ุชุดุฎุต ุชููุจ ุจุฑุง ฺฉ ูุณุฎู ุฌุฏุฏ

#### ูพุงุฑุงูุชุฑูุง ูุฑูุฏ:
```json
{
    "ID": 48928,
    "jalali_date": "1361/05/04",
    "Adm_date": "1403/08/05",
    "Service": "ูุฒุช ูุชุฎุตุต",
    "provider_name": "ุญุณูุฎุงู ุฎุณุฑูุฎุงูุฑ",
    "provider_specialty": "ุฏฺฉุชุฑุง ุญุฑููโุง ูพุฒุดฺฉ",
    "cost_amount": 2000000
}
```

#### ูพุงุณุฎ:
```json
{
    "prediction": 1,
    "score": 0.038,
    "is_fraud": false,
    "risk_scores": [26.97, 52.54, 37.94, 34.07, 42.02, 41.78, 49.52, 47.22, 43.18, 43.06, 77.47],
    "features": {
        "unq_ratio_provider": 1.0,
        "unq_ratio_patient": 1.52,
        "percent_change_provider": 0.0,
        "percent_change_patient": 0.0,
        "percent_difference": 2.99,
        "percent_diff_ser": 0.0,
        "percent_diff_spe": 33.09,
        "percent_diff_spe2": 0.0,
        "percent_diff_ser_patient": 3.71,
        "percent_diff_serv": 3.71,
        "Ratio": 0.81
    }
}
```

### 3. ูููุฏุงุฑ ุชููุจ ุจุฑ ุงุณุงุณ ุงุณุชุงู
- **URL**: `/charts/fraud-by-province`
- **Method**: GET
- **ุชูุถุญุงุช**: ูููุฏุงุฑ ูููโุง ุงุฒ ุชุนุฏุงุฏ ูุณุฎูโูุง ุชููุจ ุฏุฑ ูุฑ ุงุณุชุงู

### 4. ูููุฏุงุฑ ุชููุจ ุจุฑ ุงุณุงุณ ุฌูุณุช
- **URL**: `/charts/fraud-by-gender`
- **Method**: GET
- **ุชูุถุญุงุช**: ูููุฏุงุฑ ุฏุงุฑูโุง ุงุฒ ูุณุจุช ูุณุฎูโูุง ุชููุจ ุจุฑ ุงุณุงุณ ุฌูุณุช

### 5. ูููุฏุงุฑ ุชููุจ ุจุฑ ุงุณุงุณ ฺฏุฑูู ุณู
- **URL**: `/charts/fraud-by-age`
- **Method**: GET
- **ุชูุถุญุงุช**: ูููุฏุงุฑ ุฏุงุฑูโุง ุงุฒ ูุณุจุช ูุณุฎูโูุง ุชููุจ ุจุฑ ุงุณุงุณ ฺฏุฑูู ุณู

### 6. ูููุฏุงุฑ ุดุงุฎุตโูุง ุฑุณฺฉ
- **URL**: `/charts/risk-indicators`
- **Method**: POST
- **ุชูุถุญุงุช**: ูููุฏุงุฑ ุดุงุฎุตโูุง ุฑุณฺฉ ุจุฑุง ฺฉ ูุณุฎู ุฎุงุต

### 7. ุขูุงุฑ ุณุณุชู
- **URL**: `/stats`
- **Method**: GET
- **ุชูุถุญุงุช**: ุขูุงุฑ ฺฉู ุงุฒ ุฏุงุฏูโูุง ููุฌูุฏ ู ูุชุงุฌ ุชุดุฎุต ุชููุจ

### 8. ุจุฑุฑุณ ุณูุงูุช ุณุณุชู
- **URL**: `/health`
- **Method**: GET
- **ุชูุถุญุงุช**: ุจุฑุฑุณ ูุถุนุช ุณุณุชู ู ูุฏู

## ๐ง ูุญูู ุงุณุชูุงุฏู

### ูุซุงู ุจุง cURL:
```bash
curl -X POST http://localhost:5000/predict \
     -H "Content-Type: application/json" \
     -d '{
         "ID": 48928,
         "jalali_date": "1361/05/04",
         "Adm_date": "1403/08/05",
         "Service": "ูุฒุช ูุชุฎุตุต",
         "provider_name": "ุญุณูุฎุงู ุฎุณุฑูุฎุงูุฑ",
         "provider_specialty": "ุฏฺฉุชุฑุง ุญุฑููโุง ูพุฒุดฺฉ",
         "cost_amount": 2000000
     }'
```

### ูุซุงู ุจุง Python:
```python
import requests
import json

url = "http://localhost:5000/predict"
data = {
    "ID": 48928,
    "jalali_date": "1361/05/04",
    "Adm_date": "1403/08/05",
    "Service": "ูุฒุช ูุชุฎุตุต",
    "provider_name": "ุญุณูุฎุงู ุฎุณุฑูุฎุงูุฑ",
    "provider_specialty": "ุฏฺฉุชุฑุง ุญุฑููโุง ูพุฒุดฺฉ",
    "cost_amount": 2000000
}

response = requests.post(url, json=data)
result = response.json()
print(json.dumps(result, indent=2, ensure_ascii=False))
```

## ๐ ุดุงุฎุตโูุง ุฑุณฺฉ

API ฑฑ ุดุงุฎุต ุฑุณฺฉ ูุฎุชูู ุฑุง ูุญุงุณุจู ูโฺฉูุฏ:

1. **unq_ratio_provider**: ูุณุจุช ฺฉู ูพุฒุดฺฉุงู ุจู ูพุฒุดฺฉุงู ููุญุตุฑ ุจู ูุฑุฏ ุจุฑุง ูุฑ ุจูุงุฑ
2. **unq_ratio_patient**: ูุณุจุช ฺฉู ุจูุงุฑุงู ุจู ุจูุงุฑุงู ููุญุตุฑ ุจู ูุฑุฏ ุจุฑุง ูุฑ ูพุฒุดฺฉ
3. **percent_change_provider**: ุฏุฑุตุฏ ุชุบุฑ ูุฒูู ูุณุฎูโูุง ูพุฒุดฺฉ ูุณุจุช ุจู ูุงูโูุง ูุจู
4. **percent_change_patient**: ุฏุฑุตุฏ ุชุบุฑ ูุฒูู ูุณุฎูโูุง ุจูุงุฑ ูุณุจุช ุจู ูุงูโูุง ูุจู
5. **percent_difference**: ุฏุฑุตุฏ ุงุฎุชูุงู ูุฒูู ุฎุฏูุช ูุณุจุช ุจู ูุงูฺฏู
6. **percent_diff_ser**: ุฏุฑุตุฏ ุชุบุฑ ูุฒูู ุฎุฏูุช ุจุฑุง ูพุฒุดฺฉ ูุณุจุช ุจู ูุงู ูุจู
7. **percent_diff_spe**: ุฏุฑุตุฏ ุชุบุฑ ูุฒูู ุชุฎุตุต ุจุฑุง ูพุฒุดฺฉ ูุณุจุช ุจู ูุงู ูุจู
8. **percent_diff_spe2**: ุฏุฑุตุฏ ุชุบุฑ ูุณุชูู ูุฒูู ุชุฎุตุต ูุณุจุช ุจู ูุงู ูุจู
9. **percent_diff_ser_patient**: ุฏุฑุตุฏ ุชุบุฑ ูุฒูู ุฎุฏูุช ุจุฑุง ุจูุงุฑ ูุณุจุช ุจู ูุงู ูุจู
10. **percent_diff_serv**: ุฏุฑุตุฏ ุชุบุฑ ฺฉู ูุฒูู ุฎุฏูุช ูุณุจุช ุจู ูุงู ูุจู
11. **Ratio**: ูุณุจุช ุฎุฏูุงุช ุจู ฺฉู ูุณุฎูโูุง ูพุฒุดฺฉ

## ๐ฏ ุชูุณุฑ ูุชุงุฌ

- **prediction**: ฑ ุจุฑุง ูุณุฎู ูุฑูุงูุ -ฑ ุจุฑุง ูุณุฎู ูุดฺฉูฺฉ
- **score**: ุงูุชุงุฒ ูุฑูุงูโุดุฏู (ููุงุฏุฑ ุจุงูุงุชุฑ ูุดุงูโุฏููุฏู ุงุญุชูุงู ุจุดุชุฑ ุชููุจ)
- **is_fraud**: true ุจุฑุง ูุณุฎู ูุดฺฉูฺฉุ false ุจุฑุง ูุณุฎู ูุฑูุงู
- **risk_scores**: ุขุฑุงูโุง ุงุฒ ฑฑ ุนุฏุฏ ุจู ฐ ุชุง ฑฐฐ ูุดุงูโุฏููุฏู ุฑุณฺฉ ูุฑ ุดุงุฎุต

## ๐ ุณุงุฎุชุงุฑ ูุงูโูุง

```
fraud-detection-algo/
โโโ app.py                          # ูุงู ุงุตู API
โโโ requirements.txt                # ูุงุจุณุชฺฏโูุง ูพุฑูฺู
โโโ API_README.md                   # ูุณุชูุฏุงุช API
โโโ DataSEt_FD7.CSV                # ุฏุงุฏูโูุง ุงุตู
โโโ specialties.csv                 # ูุงู ุชุฎุตุตโูุง
โโโ assets/                         # ูุงูโูุง ุฏุงุฑุง
โ   โโโ Vazir-Medium-FD.ttf        # ูููุช ูุงุฑุณ
โโโ *_function.py                   # ุชูุงุจุน ูุญุงุณุจู ูฺฺฏโูุง
โโโ Project_FD 0.ipynb             # ูุงู Jupyter ุงุตู
```

## ๐ ุนุจโุงุจ

### ูุดฺฉูุงุช ุฑุงุฌ:

1. **ุฎุทุง ุจุงุฑฺฏุฐุงุฑ ุฏุงุฏูโูุง**: ุงุทููุงู ุญุงุตู ฺฉูุฏ ฺฉู ูุงู `DataSEt_FD7.CSV` ุฏุฑ ูุณุฑ ุตุญุญ ูุฑุงุฑ ุฏุงุฑุฏ
2. **ุฎุทุง ูููุช**: ูุงู ูููุช ูุงุฑุณ ุฏุฑ ูพูุดู `assets` ุจุงุฏ ููุฌูุฏ ุจุงุดุฏ
3. **ุฎุทุง ุญุงูุธู**: ุจุฑุง ุฏุงุฏูโูุง ุจุฒุฑฺฏุ ููฺฉู ุงุณุช ูุงุฒ ุจู ุงูุฒุงุด ุญุงูุธู ุฏุงุดุชู ุจุงุดุฏ

### ูุงฺฏโูุง:
API ูุงฺฏโูุง ููุตูโุง ุชููุฏ ูโฺฉูุฏ ฺฉู ูโุชูุงูุฏ ุจุฑุง ุนุจโุงุจ ุงุณุชูุงุฏู ฺฉูุฏ.

## ๐ ูพุดุชุจุงู

ุจุฑุง ุณูุงูุงุช ู ูุดฺฉูุงุชุ ูุทูุงู ุจุง ุชู ุชูุณุนู ุชูุงุณ ุจฺฏุฑุฏ.

## ๐ ูุฌูุฒ

ุงู ูพุฑูฺู ุชุญุช ูุฌูุฒ MIT ููุชุดุฑ ุดุฏู ุงุณุช.
